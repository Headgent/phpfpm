# =============================================================================
# DOCKER IMAGE BUILD CONFIGURATION
# =============================================================================
# This file contains ONLY variables needed for building Docker images.
# Runtime configuration belongs in the project's .env (see .env.template)

# Docker Hub
DOCKER_HUB=headgent
DOCKER_BUILDKIT=1
MAINTAINER_EMAIL=devops@headgent.dev
VERSION=1.0.0

# User/Group (baked into image for host volume permissions)
# Default 1000:1000 = Linux standard for first user
# User is fixed as "appuser" in Dockerfiles
PUID=1000
PGID=1000

# =============================================================================
# BASE IMAGE
# =============================================================================
ALPINE_VERSION=3.23

# =============================================================================
# PHP-FPM BUILD
# =============================================================================
PHP_VERSION=8.3
COMPOSER_VERSION=2.9.3

# PECL extension versions
APCU_VERSION=5.1.27
REDIS_PECL_VERSION=6.2.0
XDEBUG_VERSION=3.4.5
PCOV_VERSION=1.0.12
AMQP_VERSION=2.1.2
RDKAFKA_VERSION=6.0.5

# PHP Runtime defaults (baked into image)
PHP_MEMORY_LIMIT=512M
PHP_MAX_EXECUTION_TIME=30
PHP_TIMEZONE=UTC
PHP_ERROR_REPORTING="E_ALL & ~E_DEPRECATED & ~E_STRICT"
PHP_DISPLAY_ERRORS=Off
PHP_LOG_ERRORS=On

# APCu
APCU_SHM_SIZE=64M

# OPcache & JIT
OPCACHE_MEMORY_CONSUMPTION=128
OPCACHE_MAX_ACCELERATED_FILES=4000
OPCACHE_VALIDATE_TIMESTAMPS=0
OPCACHE_REVALIDATE_FREQ=0
OPCACHE_JIT=1254
OPCACHE_JIT_BUFFER_SIZE=128M

# Xdebug
XDEBUG_MODE=off
XDEBUG_START_WITH_REQUEST=yes
XDEBUG_CLIENT_HOST=host.docker.internal
XDEBUG_CLIENT_PORT=9003
XDEBUG_LOG_LEVEL=0
XDEBUG_IDEKEY=PHPSTORM

# PCOV
PCOV_ENABLED=0

# PHP-FPM Pool
FPM_PM=dynamic
FPM_PM_MAX_CHILDREN=5
FPM_PM_START_SERVERS=2
FPM_PM_MIN_SPARE_SERVERS=1
FPM_PM_MAX_SPARE_SERVERS=3
FPM_PM_MAX_REQUESTS=500

# =============================================================================
# NGINX BUILD
# =============================================================================
WEBSERVER_VERSION=1.28

